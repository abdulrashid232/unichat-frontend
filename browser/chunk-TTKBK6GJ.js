import{b}from"./chunk-G3UUUKVK.js";import{a as F,b as p,c as L,d as E,e as T,f as M,g as q,h as N,i as G,j as R}from"./chunk-NFRYHEAP.js";import"./chunk-BYXBJQAS.js";import{A as x,Aa as y,Ba as S,G as l,I as c,J as _,N as m,Q as v,S as s,V as r,W as a,X as g,Z as h,_ as f,ca as n,da as C,ta as w}from"./chunk-HSJBYG5P.js";function D(e,o){e&1&&n(0," Email is required ")}function I(e,o){e&1&&n(0," Please enter a valid email address ")}function P(e,o){if(e&1&&(r(0,"div",8),m(1,D,1,0)(2,I,1,0),a()),e&2){let t,i=f();l(),s((t=i.loginForm.get("email"))!=null&&t.hasError("required")?1:(t=i.loginForm.get("email"))!=null&&t.hasError("email")?2:-1)}}function V(e,o){e&1&&n(0," Password is required ")}function j(e,o){e&1&&n(0," Password must be at least 6 characters ")}function k(e,o){if(e&1&&(r(0,"div",8),m(1,V,1,0)(2,j,1,0),a()),e&2){let t,i=f();l(),s((t=i.loginForm.get("password"))!=null&&t.hasError("required")?1:(t=i.loginForm.get("password"))!=null&&t.hasError("minlength")?2:-1)}}function B(e,o){if(e&1&&(r(0,"div",11)(1,"div",16)(2,"div")(3,"p",17),n(4),a()()()()),e&2){let t=f();l(4),C(t.errorMessage)}}function z(e,o){e&1&&(x(),r(0,"svg",18),g(1,"circle",19)(2,"path",20),a(),n(3," Signing in... "))}function H(e,o){e&1&&n(0," Sign in ")}var A=class e{constructor(o,t,i){this.fb=o;this.authService=t;this.router=i;this.loginForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]})}loginForm;errorMessage=null;isLoading=!1;onSubmit(){if(this.loginForm.invalid)return;this.isLoading=!0,this.errorMessage=null;let{email:o,password:t}=this.loginForm.value;this.authService.login(o,t).subscribe({next:()=>{this.isLoading=!1,this.router.navigate(["/chat"])},error:i=>{this.isLoading=!1,this.errorMessage=i.message}})}static \u0275fac=function(t){return new(t||e)(c(G),c(b),c(y))};static \u0275cmp=_({type:e,selectors:[["app-login"]],decls:29,vars:6,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-50","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"mt-6","text-center","text-3xl","font-extrabold","text-gray-900"],[1,"mt-2","text-center","text-sm","text-gray-600"],[1,"mt-8","space-y-6",3,"ngSubmit","formGroup"],[1,"rounded-md","shadow-sm","space-y-4"],["for","email",1,"form-label"],["id","email","name","email","type","email","formControlName","email","placeholder","Email address","required","",1,"form-input"],[1,"form-error"],["for","password",1,"form-label"],["id","password","name","password","type","password","formControlName","password","placeholder","Password","required","",1,"form-input"],[1,"bg-red-50","border-l-4","border-red-500","p-4"],["type","submit",1,"btn","btn-primary","w-full","flex","justify-center",3,"disabled"],[1,"text-sm","text-center"],[1,"text-gray-600"],["routerLink","/register",1,"font-medium","text-primary","hover:text-primary-dark","cursor-pointer"],[1,"flex"],[1,"text-sm","text-red-700"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(t,i){if(t&1&&(r(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),n(4," Sign in to UniChat "),a(),r(5,"p",3),n(6," Your university AI chat assistant "),a()(),r(7,"form",4),h("ngSubmit",function(){return i.onSubmit()}),r(8,"div",5)(9,"div")(10,"label",6),n(11,"Email address"),a(),g(12,"input",7),m(13,P,3,1,"div",8),a(),r(14,"div")(15,"label",9),n(16,"Password"),a(),g(17,"input",10),m(18,k,3,1,"div",8),a()(),m(19,B,5,1,"div",11),r(20,"div")(21,"button",12),m(22,z,4,0)(23,H,1,0),a()(),r(24,"div",13)(25,"p",14),n(26," Don't have an account? "),r(27,"a",15),n(28," Register here "),a()()()()()()),t&2){let d,u;l(7),v("formGroup",i.loginForm),l(6),s((d=i.loginForm.get("email"))!=null&&d.invalid&&((d=i.loginForm.get("email"))!=null&&d.touched)?13:-1),l(5),s((u=i.loginForm.get("password"))!=null&&u.invalid&&((u=i.loginForm.get("password"))!=null&&u.touched)?18:-1),l(),s(i.errorMessage?19:-1),l(2),v("disabled",i.loginForm.invalid||i.isLoading),l(),s(i.isLoading?22:23)}},dependencies:[w,R,T,F,L,E,N,M,q,S],encapsulation:2})};export{A as LoginComponent};
