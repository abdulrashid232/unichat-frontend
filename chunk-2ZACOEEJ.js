import{a as bt,b as xt,c as kt,d as me,e as wt,f as fe,g as yt,i as Ct,j as ge}from"./chunk-7D7WHRTW.js";import{a as St}from"./chunk-GFQI2APN.js";import"./chunk-GJUVR4XO.js";import{A as Je,Aa as Q,B as Y,Ba as $e,C as j,Ca as ue,E as et,F as $,G as I,H as F,I as Ee,Ja as ht,K as H,Ka as ut,La as de,M as tt,Ma as D,Na as W,O as nt,Qa as dt,R as it,T as k,Ta as mt,Ua as ft,W as V,Wa as gt,X as st,Y as O,Z as rt,a as b,aa as E,b as q,d as qe,da as M,ea as J,f as G,ga as R,ha as ie,i as He,ia as se,ja as u,k as ve,ka as m,la as T,m as Ue,ma as U,n as Ge,na as C,oa as S,p as Ze,pa as ot,q as Qe,qa as lt,ra as at,s as We,sa as ct,t as Xe,ta as pt,u as Ke,ua as w,v as Z,va as he,wa as z,z as Ye,za as Re}from"./chunk-EMO2IYOT.js";var _t=[{id:"math",name:"Mathematics"},{id:"cs",name:"Computer Science"},{id:"phys",name:"Physics"},{id:"chem",name:"Chemistry"},{id:"bio",name:"Biology"},{id:"eng",name:"Engineering"},{id:"lit",name:"Literature"},{id:"hist",name:"History"},{id:"psyc",name:"Psychology"},{id:"econ",name:"Economics"}];function Me(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var K=Me();function It(o){K=o}var le={exec:()=>null};function x(o,n=""){let e=typeof o=="string"?o:o.source,t={replace:(i,s)=>{let r=typeof s=="string"?s:s.source;return r=r.replace(_.caret,"$1"),e=e.replace(i,r),t},getRegex:()=>new RegExp(e,n)};return t}var _={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:o=>new RegExp(`^( {0,3}${o})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}#`),htmlBeginRegex:o=>new RegExp(`^ {0,${Math.min(3,o-1)}}<(?:[a-z].*>|!--)`,"i")},Gt=/^(?:[ \t]*(?:\n|$))+/,Zt=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Qt=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ce=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Wt=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ot=/(?:[*+-]|\d{1,9}[.)])/,Mt=x(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Ot).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Ae=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Xt=/^[^\n]+/,Le=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Kt=x(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Le).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Yt=x(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ot).getRegex(),ke="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Pe=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Jt=x("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Pe).replace("tag",ke).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),At=x(Ae).replace("hr",ce).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ke).getRegex(),en=x(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",At).getRegex(),ze={blockquote:en,code:Zt,def:Kt,fences:Qt,heading:Wt,hr:ce,html:Jt,lheading:Mt,list:Yt,newline:Gt,paragraph:At,table:le,text:Xt},Tt=x("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ce).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ke).getRegex(),tn=q(b({},ze),{table:Tt,paragraph:x(Ae).replace("hr",ce).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Tt).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ke).getRegex()}),nn=q(b({},ze),{html:x(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Pe).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:le,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:x(Ae).replace("hr",ce).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Mt).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),Lt=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,sn=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Pt=/^( {2,}|\\)\n(?!\s*$)/,rn=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,pe="\\p{P}\\p{S}",on=x(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,pe).getRegex(),ln=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,an=x(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,pe).getRegex(),cn=x("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,pe).getRegex(),pn=x("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,pe).getRegex(),hn=x(/\\([punct])/,"gu").replace(/punct/g,pe).getRegex(),un=x(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),dn=x(Pe).replace("(?:-->|$)","-->").getRegex(),mn=x("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",dn).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),xe=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,fn=x(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",xe).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),zt=x(/^!?\[(label)\]\[(ref)\]/).replace("label",xe).replace("ref",Le).getRegex(),Dt=x(/^!?\[(ref)\](?:\[\])?/).replace("ref",Le).getRegex(),gn=x("reflink|nolink(?!\\()","g").replace("reflink",zt).replace("nolink",Dt).getRegex(),De={_backpedal:le,anyPunctuation:hn,autolink:un,blockSkip:ln,br:Pt,code:sn,del:le,emStrongLDelim:an,emStrongRDelimAst:cn,emStrongRDelimUnd:pn,escape:Lt,link:fn,nolink:Dt,punctuation:on,reflink:zt,reflinkSearch:gn,tag:mn,text:rn,url:le},bn=q(b({},De),{link:x(/^!?\[(label)\]\((.*?)\)/).replace("label",xe).getRegex(),reflink:x(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",xe).getRegex()}),Ie=q(b({},De),{escape:x(Lt).replace("])","~|])").getRegex(),url:x(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),xn=q(b({},Ie),{br:x(Pt).replace("{2,}","*").getRegex(),text:x(Ie.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),be={normal:ze,gfm:tn,pedantic:nn},re={normal:De,gfm:Ie,breaks:xn,pedantic:bn},kn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vt=o=>kn[o];function B(o,n){if(n){if(_.escapeTest.test(o))return o.replace(_.escapeReplace,vt)}else if(_.escapeTestNoEncode.test(o))return o.replace(_.escapeReplaceNoEncode,vt);return o}function Et(o){try{o=encodeURI(o).replace(_.percentDecode,"%")}catch{return null}return o}function Rt(o,n){let e=o.replace(_.findPipe,(s,r,l)=>{let a=!1,p=r;for(;--p>=0&&l[p]==="\\";)a=!a;return a?"|":" |"}),t=e.split(_.splitPipe),i=0;if(t[0].trim()||t.shift(),t.length>0&&!t[t.length-1].trim()&&t.pop(),n)if(t.length>n)t.splice(n);else for(;t.length<n;)t.push("");for(;i<t.length;i++)t[i]=t[i].trim().replace(_.slashPipe,"|");return t}function oe(o,n,e){let t=o.length;if(t===0)return"";let i=0;for(;i<t;){let s=o.charAt(t-i-1);if(s===n&&!e)i++;else if(s!==n&&e)i++;else break}return o.slice(0,t-i)}function wn(o,n){if(o.indexOf(n[1])===-1)return-1;let e=0;for(let t=0;t<o.length;t++)if(o[t]==="\\")t++;else if(o[t]===n[0])e++;else if(o[t]===n[1]&&(e--,e<0))return t;return-1}function $t(o,n,e,t,i){let s=n.href,r=n.title||null,l=o[1].replace(i.other.outputLinkReplace,"$1");if(o[0].charAt(0)!=="!"){t.state.inLink=!0;let a={type:"link",raw:e,href:s,title:r,text:l,tokens:t.inlineTokens(l)};return t.state.inLink=!1,a}return{type:"image",raw:e,href:s,title:r,text:l}}function yn(o,n,e){let t=o.match(e.other.indentCodeCompensation);if(t===null)return n;let i=t[1];return n.split(`
`).map(s=>{let r=s.match(e.other.beginningSpace);if(r===null)return s;let[l]=r;return l.length>=i.length?s.slice(i.length):s}).join(`
`)}var te=class{options;rules;lexer;constructor(n){this.options=n||K}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:oe(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],i=yn(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let i=oe(t,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(t=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:oe(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=oe(e[0],`
`).split(`
`),i="",s="",r=[];for(;t.length>0;){let l=!1,a=[],p;for(p=0;p<t.length;p++)if(this.rules.other.blockquoteStart.test(t[p]))a.push(t[p]),l=!0;else if(!l)a.push(t[p]);else break;t=t.slice(p);let c=a.join(`
`),h=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${c}`:c,s=s?`${s}
${h}`:h;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,r,!0),this.lexer.state.top=f,t.length===0)break;let y=r[r.length-1];if(y?.type==="code")break;if(y?.type==="blockquote"){let d=y,v=d.raw+`
`+t.join(`
`),P=this.blockquote(v);r[r.length-1]=P,i=i.substring(0,i.length-d.raw.length)+P.raw,s=s.substring(0,s.length-d.text.length)+P.text;break}else if(y?.type==="list"){let d=y,v=d.raw+`
`+t.join(`
`),P=this.list(v);r[r.length-1]=P,i=i.substring(0,i.length-y.raw.length)+P.raw,s=s.substring(0,s.length-d.raw.length)+P.raw,t=v.substring(r[r.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:r,text:s}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim(),i=t.length>1,s={type:"list",raw:"",ordered:i,start:i?+t.slice(0,-1):"",loose:!1,items:[]};t=i?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=i?t:"[*+-]");let r=this.rules.other.listItemRegex(t),l=!1;for(;n;){let a=!1,p="",c="";if(!(e=r.exec(n))||this.rules.block.hr.test(n))break;p=e[0],n=n.substring(p.length);let h=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,_e=>" ".repeat(3*_e.length)),f=n.split(`
`,1)[0],y=!h.trim(),d=0;if(this.options.pedantic?(d=2,c=h.trimStart()):y?d=e[1].length+1:(d=e[2].search(this.rules.other.nonSpaceChar),d=d>4?1:d,c=h.slice(d),d+=e[1].length),y&&this.rules.other.blankLine.test(f)&&(p+=f+`
`,n=n.substring(f.length+1),a=!0),!a){let _e=this.rules.other.nextBulletRegex(d),je=this.rules.other.hrRegex(d),Fe=this.rules.other.fencesBeginRegex(d),Ve=this.rules.other.headingBeginRegex(d),Ut=this.rules.other.htmlBeginRegex(d);for(;n;){let Te=n.split(`
`,1)[0],ne;if(f=Te,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),ne=f):ne=f.replace(this.rules.other.tabCharGlobal,"    "),Fe.test(f)||Ve.test(f)||Ut.test(f)||_e.test(f)||je.test(f))break;if(ne.search(this.rules.other.nonSpaceChar)>=d||!f.trim())c+=`
`+ne.slice(d);else{if(y||h.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||Fe.test(h)||Ve.test(h)||je.test(h))break;c+=`
`+f}!y&&!f.trim()&&(y=!0),p+=Te+`
`,n=n.substring(Te.length+1),h=ne.slice(d)}}s.loose||(l?s.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(l=!0));let v=null,P;this.options.gfm&&(v=this.rules.other.listIsTask.exec(c),v&&(P=v[0]!=="[ ] ",c=c.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:p,task:!!v,checked:P,loose:!1,text:c,tokens:[]}),s.raw+=p}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let a=0;a<s.items.length;a++)if(this.lexer.state.top=!1,s.items[a].tokens=this.lexer.blockTokens(s.items[a].text,[]),!s.loose){let p=s.items[a].tokens.filter(h=>h.type==="space"),c=p.length>0&&p.some(h=>this.rules.other.anyLine.test(h.raw));s.loose=c}if(s.loose)for(let a=0;a<s.items.length;a++)s.items[a].loose=!0;return s}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:i,title:s}}}table(n){let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=Rt(e[1]),i=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=e[3]&&e[3].trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],r={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===i.length){for(let l of i)this.rules.other.tableAlignRight.test(l)?r.align.push("right"):this.rules.other.tableAlignCenter.test(l)?r.align.push("center"):this.rules.other.tableAlignLeft.test(l)?r.align.push("left"):r.align.push(null);for(let l=0;l<t.length;l++)r.header.push({text:t[l],tokens:this.lexer.inline(t[l]),header:!0,align:r.align[l]});for(let l of s)r.rows.push(Rt(l,r.header.length).map((a,p)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:r.align[p]})));return r}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let r=oe(t.slice(0,-1),"\\");if((t.length-r.length)%2===0)return}else{let r=wn(e[2],"()");if(r>-1){let a=(e[0].indexOf("!")===0?5:4)+e[1].length+r;e[2]=e[2].substring(0,r),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let i=e[2],s="";if(this.options.pedantic){let r=this.rules.other.pedanticHrefTitle.exec(i);r&&(i=r[1],s=r[3])}else s=e[3]?e[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?i=i.slice(1):i=i.slice(1,-1)),$t(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let i=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=e[i.toLowerCase()];if(!s){let r=t[0].charAt(0);return{type:"text",raw:r,text:r}}return $t(t,s,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let i=this.rules.inline.emStrongLDelim.exec(n);if(!i||i[3]&&t.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!t||this.rules.inline.punctuation.exec(t)){let r=[...i[0]].length-1,l,a,p=r,c=0,h=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,e=e.slice(-1*n.length+r);(i=h.exec(e))!=null;){if(l=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!l)continue;if(a=[...l].length,i[3]||i[4]){p+=a;continue}else if((i[5]||i[6])&&r%3&&!((r+a)%3)){c+=a;continue}if(p-=a,p>0)continue;a=Math.min(a,a+p+c);let f=[...i[0]][0].length,y=n.slice(0,r+i.index+f+a);if(Math.min(r,a)%2){let v=y.slice(1,-1);return{type:"em",raw:y,text:v,tokens:this.lexer.inlineTokens(v)}}let d=y.slice(2,-2);return{type:"strong",raw:y,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(t),s=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return i&&s&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,i;return e[2]==="@"?(t=e[1],i="mailto:"+t):(t=e[1],i=t),{type:"link",raw:e[0],text:t,href:i,tokens:[{type:"text",raw:t,text:t}]}}}url(n){let e;if(e=this.rules.inline.url.exec(n)){let t,i;if(e[2]==="@")t=e[0],i="mailto:"+t;else{let s;do s=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(s!==e[0]);t=e[0],e[1]==="www."?i="http://"+e[0]:i=e[0]}return{type:"link",raw:e[0],text:t,href:i,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},A=class o{tokens;options;state;tokenizer;inlineQueue;constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||K,this.options.tokenizer=this.options.tokenizer||new te,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:_,block:be.normal,inline:re.normal};this.options.pedantic?(e.block=be.pedantic,e.inline=re.pedantic):this.options.gfm&&(e.block=be.gfm,this.options.breaks?e.inline=re.breaks:e.inline=re.gfm),this.tokenizer.rules=e}static get rules(){return{block:be,inline:re}}static lex(n,e){return new o(e).lex(n)}static lexInline(n,e){return new o(e).inlineTokens(n)}lex(n){n=n.replace(_.carriageReturn,`
`),this.blockTokens(n,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(n,e=[],t=!1){this.options.pedantic&&(n=n.replace(_.tabCharGlobal,"    ").replace(_.spaceLine,""));let i,s,r;for(;n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(i=l.call({lexer:this},n,e))?(n=n.substring(i.raw.length),e.push(i),!0):!1))){if(i=this.tokenizer.space(n)){n=n.substring(i.raw.length),i.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(i);continue}if(i=this.tokenizer.code(n)){n=n.substring(i.raw.length),s=e[e.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text):e.push(i);continue}if(i=this.tokenizer.fences(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.heading(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.hr(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.blockquote(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.list(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.html(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.def(n)){n=n.substring(i.raw.length),s=e[e.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+i.raw,s.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(n)){n=n.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.lheading(n)){n=n.substring(i.raw.length),e.push(i);continue}if(r=n,this.options.extensions&&this.options.extensions.startBlock){let l=1/0,a=n.slice(1),p;this.options.extensions.startBlock.forEach(c=>{p=c.call({lexer:this},a),typeof p=="number"&&p>=0&&(l=Math.min(l,p))}),l<1/0&&l>=0&&(r=n.substring(0,l+1))}if(this.state.top&&(i=this.tokenizer.paragraph(r))){s=e[e.length-1],t&&s?.type==="paragraph"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):e.push(i),t=r.length!==n.length,n=n.substring(i.raw.length);continue}if(i=this.tokenizer.text(n)){n=n.substring(i.raw.length),s=e[e.length-1],s&&s.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):e.push(i);continue}if(n){let l="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,e}inline(n,e=[]){return this.inlineQueue.push({src:n,tokens:e}),e}inlineTokens(n,e=[]){let t,i,s,r=n,l,a,p;if(this.tokens.links){let c=Object.keys(this.tokens.links);if(c.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)c.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,l.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;n;)if(a||(p=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>(t=c.call({lexer:this},n,e))?(n=n.substring(t.raw.length),e.push(t),!0):!1))){if(t=this.tokenizer.escape(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.tag(n)){n=n.substring(t.raw.length),i=e[e.length-1],e.push(t);continue}if(t=this.tokenizer.link(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(t.raw.length),i=e[e.length-1],i&&t.type==="text"&&i.type==="text"?(i.raw+=t.raw,i.text+=t.text):e.push(t);continue}if(t=this.tokenizer.emStrong(n,r,p)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.codespan(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.br(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.del(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.autolink(n)){n=n.substring(t.raw.length),e.push(t);continue}if(!this.state.inLink&&(t=this.tokenizer.url(n))){n=n.substring(t.raw.length),e.push(t);continue}if(s=n,this.options.extensions&&this.options.extensions.startInline){let c=1/0,h=n.slice(1),f;this.options.extensions.startInline.forEach(y=>{f=y.call({lexer:this},h),typeof f=="number"&&f>=0&&(c=Math.min(c,f))}),c<1/0&&c>=0&&(s=n.substring(0,c+1))}if(t=this.tokenizer.inlineText(s)){n=n.substring(t.raw.length),t.raw.slice(-1)!=="_"&&(p=t.raw.slice(-1)),a=!0,i=e[e.length-1],i&&i.type==="text"?(i.raw+=t.raw,i.text+=t.text):e.push(t);continue}if(n){let c="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return e}},N=class{options;parser;constructor(n){this.options=n||K}space(n){return""}code({text:n,lang:e,escaped:t}){let i=(e||"").match(_.notSpaceStart)?.[0],s=n.replace(_.endingNewline,"")+`
`;return i?'<pre><code class="language-'+B(i)+'">'+(t?s:B(s,!0))+`</code></pre>
`:"<pre><code>"+(t?s:B(s,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,t=n.start,i="";for(let l=0;l<n.items.length;l++){let a=n.items[l];i+=this.listitem(a)}let s=e?"ol":"ul",r=e&&t!==1?' start="'+t+'"':"";return"<"+s+r+`>
`+i+"</"+s+`>
`}listitem(n){let e="";if(n.task){let t=this.checkbox({checked:!!n.checked});n.loose?n.tokens.length>0&&n.tokens[0].type==="paragraph"?(n.tokens[0].text=t+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&n.tokens[0].tokens[0].type==="text"&&(n.tokens[0].tokens[0].text=t+" "+B(n.tokens[0].tokens[0].text),n.tokens[0].tokens[0].escaped=!0)):n.tokens.unshift({type:"text",raw:t+" ",text:t+" ",escaped:!0}):e+=t+" "}return e+=this.parser.parse(n.tokens,!!n.loose),`<li>${e}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let s=0;s<n.header.length;s++)t+=this.tablecell(n.header[s]);e+=this.tablerow({text:t});let i="";for(let s=0;s<n.rows.length;s++){let r=n.rows[s];t="";for(let l=0;l<r.length;l++)t+=this.tablecell(r[l]);i+=this.tablerow({text:t})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+i+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${B(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){let i=this.parser.parseInline(t),s=Et(n);if(s===null)return i;n=s;let r='<a href="'+n+'"';return e&&(r+=' title="'+B(e)+'"'),r+=">"+i+"</a>",r}image({href:n,title:e,text:t}){let i=Et(n);if(i===null)return B(t);n=i;let s=`<img src="${n}" alt="${t}"`;return e&&(s+=` title="${B(e)}"`),s+=">",s}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:B(n.text)}},ae=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}},L=class o{options;renderer;textRenderer;constructor(n){this.options=n||K,this.options.renderer=this.options.renderer||new N,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ae}static parse(n,e){return new o(e).parse(n)}static parseInline(n,e){return new o(e).parseInline(n)}parse(n,e=!0){let t="";for(let i=0;i<n.length;i++){let s=n[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let l=s,a=this.options.extensions.renderers[l.type].call({parser:this},l);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){t+=a||"";continue}}let r=s;switch(r.type){case"space":{t+=this.renderer.space(r);continue}case"hr":{t+=this.renderer.hr(r);continue}case"heading":{t+=this.renderer.heading(r);continue}case"code":{t+=this.renderer.code(r);continue}case"table":{t+=this.renderer.table(r);continue}case"blockquote":{t+=this.renderer.blockquote(r);continue}case"list":{t+=this.renderer.list(r);continue}case"html":{t+=this.renderer.html(r);continue}case"paragraph":{t+=this.renderer.paragraph(r);continue}case"text":{let l=r,a=this.renderer.text(l);for(;i+1<n.length&&n[i+1].type==="text";)l=n[++i],a+=`
`+this.renderer.text(l);e?t+=this.renderer.paragraph({type:"paragraph",raw:a,text:a,tokens:[{type:"text",raw:a,text:a,escaped:!0}]}):t+=a;continue}default:{let l='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return t}parseInline(n,e){e=e||this.renderer;let t="";for(let i=0;i<n.length;i++){let s=n[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){t+=l||"";continue}}let r=s;switch(r.type){case"escape":{t+=e.text(r);break}case"html":{t+=e.html(r);break}case"link":{t+=e.link(r);break}case"image":{t+=e.image(r);break}case"strong":{t+=e.strong(r);break}case"em":{t+=e.em(r);break}case"codespan":{t+=e.codespan(r);break}case"br":{t+=e.br(r);break}case"del":{t+=e.del(r);break}case"text":{t+=e.text(r);break}default:{let l='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return t}},ee=class{options;block;constructor(n){this.options=n||K}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}provideLexer(){return this.block?A.lex:A.lexInline}provideParser(){return this.block?L.parse:L.parseInline}},Oe=class{defaults=Me();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=L;Renderer=N;TextRenderer=ae;Lexer=A;Tokenizer=te;Hooks=ee;constructor(...n){this.use(...n)}walkTokens(n,e){let t=[];for(let i of n)switch(t=t.concat(e.call(this,i)),i.type){case"table":{let s=i;for(let r of s.header)t=t.concat(this.walkTokens(r.tokens,e));for(let r of s.rows)for(let l of r)t=t.concat(this.walkTokens(l.tokens,e));break}case"list":{let s=i;t=t.concat(this.walkTokens(s.items,e));break}default:{let s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(r=>{let l=s[r].flat(1/0);t=t.concat(this.walkTokens(l,e))}):s.tokens&&(t=t.concat(this.walkTokens(s.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let i=b({},t);if(i.async=this.defaults.async||i.async||!1,t.extensions&&(t.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let r=e.renderers[s.name];r?e.renderers[s.name]=function(...l){let a=s.renderer.apply(this,l);return a===!1&&(a=r.apply(this,l)),a}:e.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let r=e[s.level];r?r.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),i.extensions=e),t.renderer){let s=this.defaults.renderer||new N(this.defaults);for(let r in t.renderer){if(!(r in s))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let l=r,a=t.renderer[l],p=s[l];s[l]=(...c)=>{let h=a.apply(s,c);return h===!1&&(h=p.apply(s,c)),h||""}}i.renderer=s}if(t.tokenizer){let s=this.defaults.tokenizer||new te(this.defaults);for(let r in t.tokenizer){if(!(r in s))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let l=r,a=t.tokenizer[l],p=s[l];s[l]=(...c)=>{let h=a.apply(s,c);return h===!1&&(h=p.apply(s,c)),h}}i.tokenizer=s}if(t.hooks){let s=this.defaults.hooks||new ee;for(let r in t.hooks){if(!(r in s))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let l=r,a=t.hooks[l],p=s[l];ee.passThroughHooks.has(r)?s[l]=c=>{if(this.defaults.async)return Promise.resolve(a.call(s,c)).then(f=>p.call(s,f));let h=a.call(s,c);return p.call(s,h)}:s[l]=(...c)=>{let h=a.apply(s,c);return h===!1&&(h=p.apply(s,c)),h}}i.hooks=s}if(t.walkTokens){let s=this.defaults.walkTokens,r=t.walkTokens;i.walkTokens=function(l){let a=[];return a.push(r.call(this,l)),s&&(a=a.concat(s.call(this,l))),a}}this.defaults=b(b({},this.defaults),i)}),this}setOptions(n){return this.defaults=b(b({},this.defaults),n),this}lexer(n,e){return A.lex(n,e??this.defaults)}parser(n,e){return L.parse(n,e??this.defaults)}parseMarkdown(n){return(t,i)=>{let s=b({},i),r=b(b({},this.defaults),s),l=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&s.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));r.hooks&&(r.hooks.options=r,r.hooks.block=n);let a=r.hooks?r.hooks.provideLexer():n?A.lex:A.lexInline,p=r.hooks?r.hooks.provideParser():n?L.parse:L.parseInline;if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(t):t).then(c=>a(c,r)).then(c=>r.hooks?r.hooks.processAllTokens(c):c).then(c=>r.walkTokens?Promise.all(this.walkTokens(c,r.walkTokens)).then(()=>c):c).then(c=>p(c,r)).then(c=>r.hooks?r.hooks.postprocess(c):c).catch(l);try{r.hooks&&(t=r.hooks.preprocess(t));let c=a(t,r);r.hooks&&(c=r.hooks.processAllTokens(c)),r.walkTokens&&this.walkTokens(c,r.walkTokens);let h=p(c,r);return r.hooks&&(h=r.hooks.postprocess(h)),h}catch(c){return l(c)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let i="<p>An error occurred:</p><pre>"+B(t.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(t);throw t}}},X=new Oe;function g(o,n){return X.parse(o,n)}g.options=g.setOptions=function(o){return X.setOptions(o),g.defaults=X.defaults,It(g.defaults),g};g.getDefaults=Me;g.defaults=K;g.use=function(...o){return X.use(...o),g.defaults=X.defaults,It(g.defaults),g};g.walkTokens=function(o,n){return X.walkTokens(o,n)};g.parseInline=X.parseInline;g.Parser=L;g.parser=L.parse;g.Renderer=N;g.TextRenderer=ae;g.Lexer=A;g.lexer=A.lex;g.Tokenizer=te;g.Hooks=ee;g.parse=g;var oi=g.options,li=g.setOptions,ai=g.use,ci=g.walkTokens,pi=g.parseInline;var hi=L.parse,ui=A.lex;var Cn=["*"],Sn="Copy",_n="Copied",Tn=(()=>{class o{constructor(){this._buttonClick$=new G,this.copied$=this._buttonClick$.pipe(Ke(()=>Ge(He(!0),Ue(3e3).pipe(Ze(!1)))),Qe(),We(1)),this.copiedText$=this.copied$.pipe(Xe(!1),ve(e=>e?_n:Sn))}onCopyToClipboardClick(){this._buttonClick$.next()}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=O({type:o,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(t,i){t&1&&(u(0,"button",0),Q(1,"async"),C("click",function(){return i.onCopyToClipboardClick()}),w(2),Q(3,"async"),m()),t&2&&(J("copied",$e(1,3,i.copied$)),k(2),he($e(3,5,i.copiedText$)))},dependencies:[ut],encapsulation:2,changeDetection:0})}}return o})(),vn=new Y("CLIPBOARD_OPTIONS");var Be=function(o){return o.CommandLine="command-line",o.LineHighlight="line-highlight",o.LineNumbers="line-numbers",o}(Be||{}),Bt=new Y("MARKED_EXTENSIONS"),En=new Y("MARKED_OPTIONS"),Rn=new Y("MERMAID_OPTIONS"),$n="[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information",In="[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information",On="[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information",Mn="[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information",An="[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function",Ln="[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information",Nt=new Y("SECURITY_CONTEXT");var jt=(()=>{class o{get options(){return this._options}set options(e){this._options=b(b({},this.DEFAULT_MARKED_OPTIONS),e)}get renderer(){return this.options.renderer}set renderer(e){this.options.renderer=e}constructor(e,t,i,s,r,l,a,p){this.clipboardOptions=e,this.extensions=t,this.mermaidOptions=s,this.platform=r,this.securityContext=l,this.http=a,this.sanitizer=p,this.DEFAULT_MARKED_OPTIONS={renderer:new N},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new G,this.reload$=this._reload$.asObservable(),this.options=i}parse(e,t=this.DEFAULT_PARSE_OPTIONS){let{decodeHtml:i,inline:s,emoji:r,mermaid:l,disableSanitizer:a}=t,p=b(b({},this.options),t.markedOptions),c=p.renderer||this.renderer||new N;this.extensions&&(this.renderer=this.extendsRendererForExtensions(c)),l&&(this.renderer=this.extendsRendererForMermaid(c));let h=this.trimIndentation(e),f=i?this.decodeHtml(h):h,y=r?this.parseEmoji(f):f,d=this.parseMarked(y,p,s);return(a?d:this.sanitizer.sanitize(this.securityContext,d))||""}render(e,t=this.DEFAULT_RENDER_OPTIONS,i){let{clipboard:s,clipboardOptions:r,katex:l,katexOptions:a,mermaid:p,mermaidOptions:c}=t;l&&this.renderKatex(e,b(b({},this.DEFAULT_KATEX_OPTIONS),a)),p&&this.renderMermaid(e,b(b(b({},this.DEFAULT_MERMAID_OPTIONS),this.mermaidOptions),c)),s&&this.renderClipboard(e,i,b(b(b({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),r)),this.highlight(e)}reload(){this._reload$.next()}getSource(e){if(!this.http)throw new Error(Ln);return this.http.get(e,{responseType:"text"}).pipe(ve(t=>this.handleExtension(e,t)))}highlight(e){if(!W(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;e||(e=document);let t=e.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(t,i=>i.classList.add("language-none")),Prism.highlightAllUnder(e)}decodeHtml(e){if(!W(this.platform))return e;let t=document.createElement("textarea");return t.innerHTML=e,t.value}extendsRendererForExtensions(e){let t=e;return t.\u0275NgxMarkdownRendererExtendedForExtensions===!0||(this.extensions?.length>0&&g.use(...this.extensions),t.\u0275NgxMarkdownRendererExtendedForExtensions=!0),e}extendsRendererForMermaid(e){let t=e;if(t.\u0275NgxMarkdownRendererExtendedForMermaid===!0)return e;let i=e.code;return e.code=s=>s.lang==="mermaid"?`<div class="mermaid">${s.text}</div>`:i(s),t.\u0275NgxMarkdownRendererExtendedForMermaid=!0,e}handleExtension(e,t){let i=e.lastIndexOf("://"),s=i>-1?e.substring(i+4):e,r=s.lastIndexOf("/"),l=r>-1?s.substring(r+1).split("?")[0]:"",a=l.lastIndexOf("."),p=a>-1?l.substring(a+1):"";return p&&p!=="md"?"```"+p+`
`+t+"\n```":t}parseMarked(e,t,i=!1){if(t.renderer){let s=b({},t.renderer);delete s.\u0275NgxMarkdownRendererExtendedForExtensions,delete s.\u0275NgxMarkdownRendererExtendedForMermaid,delete t.renderer,g.use({renderer:s})}return i?g.parseInline(e,t):g.parse(e,t)}parseEmoji(e){if(!W(this.platform))return e;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error($n);return joypixels.shortnameToUnicode(e)}renderKatex(e,t){if(W(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error(In);renderMathInElement(e,t)}}renderClipboard(e,t,i){if(!W(this.platform))return;if(typeof ClipboardJS>"u")throw new Error(Mn);if(!t)throw new Error(An);let{buttonComponent:s,buttonTemplate:r}=i,l=e.querySelectorAll("pre");for(let a=0;a<l.length;a++){let p=l.item(a),c=document.createElement("div");c.style.position="relative",p.parentNode.insertBefore(c,p),c.appendChild(p);let h=document.createElement("div");h.classList.add("markdown-clipboard-toolbar"),h.style.position="absolute",h.style.top=".5em",h.style.right=".5em",h.style.zIndex="1",c.insertAdjacentElement("beforeend",h),c.onmouseenter=()=>h.classList.add("hover"),c.onmouseleave=()=>h.classList.remove("hover");let f;if(s){let d=t.createComponent(s);f=d.hostView,d.changeDetectorRef.markForCheck()}else if(r)f=t.createEmbeddedView(r);else{let d=t.createComponent(Tn);f=d.hostView,d.changeDetectorRef.markForCheck()}let y;f.rootNodes.forEach(d=>{h.appendChild(d),y=new ClipboardJS(d,{text:()=>p.innerText})}),f.onDestroy(()=>y.destroy())}}renderMermaid(e,t=this.DEFAULT_MERMAID_OPTIONS){if(!W(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error(On);let i=e.querySelectorAll(".mermaid");i.length!==0&&(mermaid.initialize(t),mermaid.run({nodes:i}))}trimIndentation(e){if(!e)return"";let t;return e.split(`
`).map(i=>{let s=t;return i.length>0&&(s=isNaN(s)?i.search(/\S|$/):Math.min(i.search(/\S|$/),s)),isNaN(t)&&(t=s),s?i.substring(s):i}).join(`
`)}static{this.\u0275fac=function(t){return new(t||o)(j(vn,8),j(Bt,8),j(En,8),j(Rn,8),j(nt),j(Nt),j(dt,8),j(mt))}}static{this.\u0275prov=Ye({token:o,factory:o.\u0275fac})}}return o})(),Ft=(()=>{class o{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(e){this._disableSanitizer=this.coerceBooleanProperty(e)}get inline(){return this._inline}set inline(e){this._inline=this.coerceBooleanProperty(e)}get clipboard(){return this._clipboard}set clipboard(e){this._clipboard=this.coerceBooleanProperty(e)}get emoji(){return this._emoji}set emoji(e){this._emoji=this.coerceBooleanProperty(e)}get katex(){return this._katex}set katex(e){this._katex=this.coerceBooleanProperty(e)}get mermaid(){return this._mermaid}set mermaid(e){this._mermaid=this.coerceBooleanProperty(e)}get lineHighlight(){return this._lineHighlight}set lineHighlight(e){this._lineHighlight=this.coerceBooleanProperty(e)}get lineNumbers(){return this._lineNumbers}set lineNumbers(e){this._lineNumbers=this.coerceBooleanProperty(e)}get commandLine(){return this._commandLine}set commandLine(e){this._commandLine=this.coerceBooleanProperty(e)}constructor(e,t,i){this.element=e,this.markdownService=t,this.viewContainerRef=i,this.error=new H,this.load=new H,this.ready=new H,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new G}ngOnChanges(){this.loadContent()}loadContent(){if(this.data!=null){this.handleData();return}if(this.src!=null){this.handleSrc();return}}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(Z(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(e,t=!1){return qe(this,null,function*(){let i={decodeHtml:t,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,disableSanitizer:this.disableSanitizer},s={clipboard:this.clipboard,clipboardOptions:this.getClipboardOptions(),katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},r=yield this.markdownService.parse(e,i);this.element.nativeElement.innerHTML=r,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,s,this.viewContainerRef),this.ready.emit()})}coerceBooleanProperty(e){return e!=null&&`${String(e)}`!="false"}getClipboardOptions(){if(this.clipboardButtonComponent||this.clipboardButtonTemplate)return{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate}}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:e=>{this.render(e).then(()=>{this.load.emit(e)})},error:e=>this.error.emit(e)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,Be.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,Be.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(e,t){let i=e.querySelectorAll("pre");for(let s=0;s<i.length;s++){let r=t instanceof Array?t:[t];i.item(s).classList.add(...r)}}setPluginOptions(e,t){let i=e.querySelectorAll("pre");for(let s=0;s<i.length;s++)Object.keys(t).forEach(r=>{let l=t[r];if(l){let a=this.toLispCase(r);i.item(s).setAttribute(a,l.toString())}})}toLispCase(e){let t=e.match(/([A-Z])/g);if(!t)return e;let i=e.toString();for(let s=0,r=t.length;s<r;s++)i=i.replace(new RegExp(t[s]),"-"+t[s].toLowerCase());return i.slice(0,1)==="-"&&(i=i.slice(1)),i}static{this.\u0275fac=function(t){return new(t||o)(V(tt),V(jt),V(st))}}static{this.\u0275cmp=O({type:o,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[et],ngContentSelectors:Cn,decls:1,vars:0,template:function(t,i){t&1&&(ot(),lt(0))},encapsulation:2})}}return o})();function Pn(o){return[jt,o?.loader??[],o?.clipboardOptions??[],o?.markedOptions??[],o?.mermaidOptions??[],Dn(o?.markedExtensions)??[],{provide:Nt,useValue:o?.sanitize??it.HTML}]}function zn(o){return o!=null&&o.provide!=null}function Dn(o){if(o)return o.reduce((n,e)=>{let t=zn(e)?q(b({},e),{multi:!0}):{provide:Bt,useValue:e,multi:!0};return[...n,t]},[])}var Vt=(()=>{class o{static forRoot(e){return{ngModule:o,providers:[Pn(e)]}}static forChild(){return{ngModule:o}}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=rt({type:o})}static{this.\u0275inj=Je({imports:[D]})}}return o})();var jn=o=>["chat-bubble",o],Fn=o=>({"bg-blue-100 text-blue-800":o});function Vn(o,n){if(o&1&&(u(0,"span",3),w(1),m()),o&2){let e=S();M("ngClass",Re(2,Fn,e.message.sender==="user")),k(),z(" ",e.message.topic," ")}}var ye=class o{message;static \u0275fac=function(e){return new(e||o)};static \u0275cmp=O({type:o,selectors:[["app-chat-bubble"]],inputs:{message:"message"},decls:9,vars:10,consts:[[3,"ngClass"],[1,"flex","items-center","space-x-2","mb-1"],[1,"text-xs","opacity-75"],[1,"text-xs","px-2","py-0.5","rounded-full","bg-gray-100",3,"ngClass"],[3,"data"],[1,"text-xs","opacity-75","text-right","mt-1"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"div",1)(2,"span",2),w(3),m(),E(4,Vn,2,4,"span",3),m(),T(5,"markdown",4),u(6,"div",5),w(7),Q(8,"date"),m()()),e&2&&(M("ngClass",Re(8,jn,t.message.sender==="user"?"chat-bubble-user":"chat-bubble-ai")),k(3),he(t.message.sender==="user"?"You":"UniChat AI"),k(),R(t.message.topic?4:-1),k(),M("data",t.message.text),k(2),z(" ",ue(8,5,t.message.timestamp,"shortTime")," "))},dependencies:[D,ht,de,Vt,Ft],styles:["[_nghost-%COMP%]{display:block}"]})};function Hn(o,n){o&1&&(F(),u(0,"svg",5),T(1,"circle",7)(2,"path",8),m())}function Un(o,n){o&1&&(F(),u(0,"svg",6),T(1,"path",9),m())}var Ce=class o{formGroup;isLoading=!1;sendMessage=new H;onSubmit(){this.formGroup.invalid||this.isLoading||this.sendMessage.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=O({type:o,selectors:[["app-message-input"]],inputs:{formGroup:"formGroup",isLoading:"isLoading"},outputs:{sendMessage:"sendMessage"},decls:7,vars:3,consts:[[3,"ngSubmit","formGroup"],[1,"relative"],["type","text","formControlName","message","placeholder","Type your question here...",1,"form-input","pr-24"],[1,"absolute","inset-y-0","right-1","flex","items-center"],["type","submit",1,"btn","btn-primary","py-1","h-8","px-2","flex","items-center","justify-center",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-4","w-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 19l9 2-9-18-9 18 9-2zm0 0v-8"]],template:function(e,t){e&1&&(u(0,"form",0),C("ngSubmit",function(){return t.onSubmit()}),u(1,"div",1),T(2,"input",2),u(3,"div",3)(4,"button",4),E(5,Hn,3,0,":svg:svg",5)(6,Un,2,0,":svg:svg",6),m()()()()),e&2&&(M("formGroup",t.formGroup),k(4),M("disabled",t.formGroup.invalid||t.isLoading),k(),R(t.isLoading?5:6))},dependencies:[D,ge,wt,bt,kt,me,fe,yt],styles:["[_nghost-%COMP%]{display:block}"]})};var Gn=(o,n)=>n.id;function Zn(o,n){if(o&1&&w(0),o&2){let e=S();z(" ",e.selectedTopic.name," ")}}function Qn(o,n){o&1&&w(0," Select Topic ")}function Wn(o,n){if(o&1){let e=U();u(0,"button",9),C("click",function(){let i=$(e).$implicit,s=S(2);return I(s.selectTopic(i))}),w(1),m()}if(o&2){let e=n.$implicit,t=S(2);J("bg-gray-100",(t.selectedTopic==null?null:t.selectedTopic.id)===e.id),k(),z(" ",e.name," ")}}function Xn(o,n){if(o&1){let e=U();u(0,"div",8)(1,"button",10),C("click",function(){$(e);let i=S(2);return I(i.clearSelection())}),w(2," Clear Selection "),m()()}}function Kn(o,n){if(o&1){let e=U();u(0,"div",5),C("clickOutside",function(){$(e);let i=S();return I(i.isOpen=!1)}),u(1,"div",6),ie(2,Wn,2,3,"button",7,Gn),E(4,Xn,3,0,"div",8),m()()}if(o&2){let e=S();k(2),se(e.topics),k(2),R(e.selectedTopic?4:-1)}}var Se=class o{topics=[];selectedTopic=null;topicSelected=new H;isOpen=!1;selectTopic(n){this.selectedTopic=n,this.topicSelected.emit(n),this.isOpen=!1}clearSelection(){this.selectedTopic=null,this.topicSelected.emit(null),this.isOpen=!1}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=O({type:o,selectors:[["app-topic-selector"]],inputs:{topics:"topics",selectedTopic:"selectedTopic"},outputs:{topicSelected:"topicSelected"},decls:7,vars:2,consts:[[1,"relative"],["type","button",1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"ml-2","-mr-0.5","h-4","w-4"],["fill-rule","evenodd","d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule","evenodd"],[1,"origin-top-right","absolute","right-0","mt-2","w-56","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","z-10"],[1,"origin-top-right","absolute","right-0","mt-2","w-56","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","z-10",3,"clickOutside"],["role","menu","aria-orientation","vertical",1,"py-1"],["type","button","role","menuitem",1,"block","w-full","text-left","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","hover:text-gray-900",3,"bg-gray-100"],[1,"border-t","border-gray-100","mt-1","pt-1"],["type","button","role","menuitem",1,"block","w-full","text-left","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","hover:text-gray-900",3,"click"],["type","button","role","menuitem",1,"block","w-full","text-left","px-4","py-2","text-sm","text-red-600","hover:bg-gray-100",3,"click"]],template:function(e,t){e&1&&(u(0,"div",0)(1,"button",1),C("click",function(){return t.isOpen=!t.isOpen}),E(2,Zn,1,1)(3,Qn,1,0),F(),u(4,"svg",2),T(5,"path",3),m()(),E(6,Kn,5,1,"div",4),m()),e&2&&(k(2),R(t.selectedTopic?2:3),k(4),R(t.isOpen?6:-1))},dependencies:[D],styles:["[_nghost-%COMP%]{display:block}"]})};var Yn=["chatContainer"],Ht=(o,n)=>n.id;function Jn(o,n){if(o&1){let e=U();u(0,"button",26),C("click",function(){let i=$(e).$implicit,s=S(2);return s.onSessionSelected(i.id),I(s.isSessionMenuOpen=!1)}),w(1),u(2,"span",27),w(3),Q(4,"date"),m()()}if(o&2){let e=n.$implicit,t=S(2);J("bg-gray-100",(t.currentSession==null?null:t.currentSession.id)===e.id),k(),z(" ",e.title," "),k(2),z(" ",ue(4,4,e.lastMessageAt,"shortDate")," ")}}function ei(o,n){if(o&1){let e=U();u(0,"div",18),C("clickOutside",function(){$(e);let i=S();return I(i.isSessionMenuOpen=!1)}),u(1,"div",19),ie(2,Jn,5,7,"button",20,Ht),u(4,"div",21)(5,"button",22),C("click",function(){$(e);let i=S();return i.createNewSession(),I(i.isSessionMenuOpen=!1)}),u(6,"span",23),F(),u(7,"svg",24),T(8,"path",25),m(),w(9," New Conversation "),m()()()()()}if(o&2){let e=S();k(2),se(e.availableSessions)}}function ti(o,n){o&1&&(u(0,"div",14),F(),u(1,"svg",28),T(2,"path",29),m(),Ee(),u(3,"h3",30),w(4,"Welcome to UniChat! \u{1F44B}"),m(),u(5,"p",31),w(6," Hello! I'm your AI assistant. How can I help with your university studies today? "),m(),u(7,"div",32)(8,"p",33),w(9," You can ask me questions like: "),m(),u(10,"ul",34)(11,"li"),w(12,"Can you explain the concept of quantum entanglement?"),m(),u(13,"li"),w(14," Help me understand the difference between macroeconomics and microeconomics "),m(),u(15,"li"),w(16,"What are some techniques for effective academic writing?"),m(),u(17,"li"),w(18,"Explain the key periods of Renaissance art"),m()()(),u(19,"p",35),w(20," You can select a subject using the topic selector above to get more targeted responses. "),m()())}function ni(o,n){if(o&1&&T(0,"app-chat-bubble",36),o&2){let e=n.$implicit;M("message",e)}}function ii(o,n){o&1&&(u(0,"div",37)(1,"div",38),T(2,"div",39)(3,"div",40)(4,"div",41),m(),u(5,"span",42),w(6,"AI is thinking..."),m()())}function si(o,n){if(o&1&&(ie(0,ni,1,1,"app-chat-bubble",36,Ht),E(2,ii,7,0,"div",37)),o&2){let e=S();se(e.currentSession==null?null:e.currentSession.messages),k(2),R(e.isLoading?2:-1)}}var qt=class o{constructor(n,e,t,i){this.fb=n;this.chatService=e;this.route=t;this.router=i;this.messageForm=this.fb.group({message:["",[xt.required]]})}chatContainer;messageForm;currentSession=null;availableSessions=[];topics=_t;selectedTopic=null;isLoading=!1;scrollToBottom=!1;isSessionMenuOpen=!1;destroy$=new G;currentSessionSubject=new G;ngOnInit(){this.chatService.loadChatHistory().subscribe(n=>{this.availableSessions=n.sessions||[],this.route.queryParams.pipe(Z(this.destroy$)).subscribe(e=>{e.session&&this.availableSessions.length?this.loadSession(e.session):this.currentSession=null})}),this.chatService.currentSession$.pipe(Z(this.destroy$)).subscribe(n=>{n&&(this.currentSession=n,this.scrollToBottom=!0)}),this.chatService.loading$.pipe(Z(this.destroy$)).subscribe(n=>{this.isLoading=n}),this.chatService.sessions$.pipe(Z(this.destroy$)).subscribe(n=>{this.availableSessions=n})}ngAfterViewChecked(){this.scrollToBottom&&(this.scrollChatToBottom(),this.scrollToBottom=!1)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadSession(n){if(!n){console.error("Cannot load session: No session ID provided");return}this.router.navigate(["/chat"],{queryParams:{session:n},replaceUrl:!0,skipLocationChange:!1}),this.chatService.getSessionById(n).subscribe({next:()=>{this.scrollToBottom=!0},error:e=>{console.error("Failed to load session:",e)}})}createNewSession(){this.currentSession=null,this.currentSessionSubject?.next(null),this.messageForm.get("message")?.setValue(""),this.router.navigate(["/chat"],{replaceUrl:!0,queryParams:{}})}onSendMessage(){if(this.messageForm.invalid||this.isLoading)return;let n=this.messageForm.get("message")?.value;if(!n)return;let e=this.selectedTopic?.name;this.messageForm.get("message")?.setValue(""),this.isLoading=!0,this.currentSession?this.chatService.sendMessageToSession(this.currentSession.id,n,e??this.currentSession.topic).subscribe({error:t=>{console.error("Error sending message to session:",t),this.isLoading=!1},complete:()=>{this.isLoading=!1}}):this.chatService.sendNewMessage(n,e).subscribe({next:t=>{t?.data?.session?.id&&this.router.navigate(["/chat"],{queryParams:{session:t.data.session.id},replaceUrl:!0}),this.scrollToBottom=!0,this.isLoading=!1},error:t=>{console.error("Error sending message:",t),this.isLoading=!1}}),this.scrollToBottom=!0}onTopicSelected(n){this.selectedTopic=n}onSessionSelected(n){this.loadSession(n)}scrollChatToBottom(){try{this.chatContainer.nativeElement.scrollTop=this.chatContainer.nativeElement.scrollHeight}catch(n){console.error("Error scrolling to bottom",n)}}static \u0275fac=function(e){return new(e||o)(V(Ct),V(St),V(ft),V(gt))};static \u0275cmp=O({type:o,selectors:[["app-chat"]],viewQuery:function(e,t){if(e&1&&at(Yn,5),e&2){let i;ct(i=pt())&&(t.chatContainer=i.first)}},decls:22,vars:7,consts:[["chatContainer",""],[1,"h-screen","flex","flex-col","bg-gray-50"],[1,"bg-white","shadow-sm","mt-16"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-4","flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"text-xl","font-semibold","text-gray-900"],[1,"relative","inline-block","text-left"],["type","button","id","session-menu","aria-haspopup","true","aria-expanded","true",1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"ml-2","-mr-0.5","h-4","w-4"],["fill-rule","evenodd","d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule","evenodd"],[1,"origin-top-right","absolute","right-0","mt-2","w-56","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","z-10"],[3,"topicSelected","topics","selectedTopic"],[1,"flex-1","overflow-y-auto","px-4","py-6","mb-20"],[1,"max-w-3xl","mx-auto","space-y-4"],[1,"flex","flex-col","items-center","justify-center","h-full","text-center","text-gray-500","p-8"],[1,"border-t","border-gray-200","bg-white","p-4","fixed","bottom-0","left-0","right-0"],[1,"max-w-3xl","mx-auto"],[3,"sendMessage","formGroup","isLoading"],[1,"origin-top-right","absolute","right-0","mt-2","w-56","rounded-md","shadow-lg","bg-white","ring-1","ring-black","ring-opacity-5","z-10",3,"clickOutside"],["role","menu","aria-orientation","vertical",1,"py-1"],["type","button","role","menuitem",1,"block","w-full","text-left","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","hover:text-gray-900",3,"bg-gray-100"],[1,"border-t","border-gray-100","mt-1","pt-1"],["type","button","role","menuitem",1,"block","w-full","text-left","px-4","py-2","text-sm","text-blue-600","hover:bg-gray-100",3,"click"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],["type","button","role","menuitem",1,"block","w-full","text-left","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-100","hover:text-gray-900",3,"click"],[1,"text-xs","text-gray-500","ml-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-12","w-12","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"],[1,"text-lg","font-medium"],[1,"mt-1"],[1,"mt-4","bg-blue-50","p-4","rounded-lg","max-w-lg"],[1,"text-sm","text-blue-800","font-medium","mb-2"],[1,"text-sm","text-blue-700","list-disc","pl-5","space-y-1"],[1,"mt-4","text-sm"],[3,"message"],[1,"flex","items-center","space-x-2","chat-bubble","chat-bubble-ai"],[1,"flex","space-x-1"],[1,"w-2","h-2","rounded-full","bg-gray-500","animate-bounce"],[1,"w-2","h-2","rounded-full","bg-gray-500","animate-bounce",2,"animation-delay","0.2s"],[1,"w-2","h-2","rounded-full","bg-gray-500","animate-bounce",2,"animation-delay","0.4s"],[1,"text-sm","text-gray-600"]],template:function(e,t){if(e&1){let i=U();u(0,"div",1)(1,"header",2)(2,"div",3)(3,"div",4)(4,"h1",5),w(5,"AI Assistant"),m(),u(6,"div",6)(7,"button",7),C("click",function(){return $(i),I(t.isSessionMenuOpen=!t.isSessionMenuOpen)}),w(8),F(),u(9,"svg",8),T(10,"path",9),m()(),E(11,ei,10,0,"div",10),m()(),Ee(),u(12,"div")(13,"app-topic-selector",11),C("topicSelected",function(r){return $(i),I(t.onTopicSelected(r||null))}),m()()()(),u(14,"div",12,0)(16,"div",13),E(17,ti,21,0,"div",14)(18,si,3,1),m()(),u(19,"div",15)(20,"div",16)(21,"app-message-input",17),C("sendMessage",function(){return $(i),I(t.onSendMessage())}),m()()()()}e&2&&(k(8),z(" ",(t.currentSession==null?null:t.currentSession.title)||"New Conversation"," "),k(3),R(t.isSessionMenuOpen?11:-1),k(2),M("topics",t.topics)("selectedTopic",t.selectedTopic),k(4),R(!(t.currentSession==null||t.currentSession.messages==null)&&t.currentSession.messages.length?18:17),k(4),M("formGroup",t.messageForm)("isLoading",t.isLoading))},dependencies:[D,de,ge,me,fe,ye,Ce,Se],encapsulation:2})};export{qt as ChatComponent};
