import{b as w}from"./chunk-MI5SW7QG.js";import{a as b,b as u,c as F,d as L,e as E,f as T,g as q,h as N,i as G,j as R}from"./chunk-IE3VFMC2.js";import{a as j}from"./chunk-RUV7RGJV.js";import{B as _,Ba as C,Ja as S,Ka as y,L as l,O as p,P as h,T as s,W as f,Z as d,aa as r,ba as a,ca as g,ea as x,fa as v,ja as n}from"./chunk-AWLQVQJC.js";function D(e,o){e&1&&n(0," Email is required ")}function I(e,o){e&1&&n(0," Please enter a valid email address ")}function P(e,o){if(e&1&&(r(0,"div",8),s(1,D,1,0)(2,I,1,0),a()),e&2){let i,t=v();l(),d((i=t.loginForm.get("email"))!=null&&i.hasError("required")?1:(i=t.loginForm.get("email"))!=null&&i.hasError("email")?2:-1)}}function V(e,o){e&1&&n(0," Password is required ")}function k(e,o){e&1&&n(0," Password must be at least 6 characters ")}function M(e,o){if(e&1&&(r(0,"div",8),s(1,V,1,0)(2,k,1,0),a()),e&2){let i,t=v();l(),d((i=t.loginForm.get("password"))!=null&&i.hasError("required")?1:(i=t.loginForm.get("password"))!=null&&i.hasError("minlength")?2:-1)}}function B(e,o){e&1&&(_(),r(0,"svg",15),g(1,"circle",16)(2,"path",17),a(),n(3," Signing in... "))}function z(e,o){e&1&&n(0," Sign in ")}var A=class e{constructor(o,i,t,m){this.fb=o;this.authService=i;this.router=t;this.toastService=m;this.loginForm=this.fb.group({email:["",[u.required,u.email]],password:["",[u.required,u.minLength(6)]]})}loginForm;isLoading=!1;onSubmit(){if(this.loginForm.invalid)return;this.isLoading=!0;let{email:o,password:i}=this.loginForm.value;this.authService.login(o,i).subscribe({next:()=>{this.isLoading=!1,this.toastService.success("Login successful!"),this.router.navigate(["/chat"])},error:t=>{this.isLoading=!1,this.toastService.error(t.message)}})}static \u0275fac=function(i){return new(i||e)(p(G),p(w),p(S),p(j))};static \u0275cmp=h({type:e,selectors:[["app-login"]],decls:28,vars:5,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-50","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"mt-6","text-center","text-3xl","font-extrabold","text-gray-900"],[1,"mt-2","text-center","text-sm","text-gray-600"],[1,"mt-8","space-y-6",3,"ngSubmit","formGroup"],[1,"rounded-md","shadow-sm","space-y-4"],["for","email",1,"form-label"],["id","email","name","email","type","email","formControlName","email","placeholder","Email address","required","",1,"form-input"],[1,"form-error"],["for","password",1,"form-label"],["id","password","name","password","type","password","formControlName","password","placeholder","Password","required","",1,"form-input"],["type","submit",1,"btn","btn-primary","w-full","flex","justify-center",3,"disabled"],[1,"text-sm","text-center"],[1,"text-gray-600"],["routerLink","/register",1,"font-medium","text-primary","hover:text-primary-dark","cursor-pointer"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(i,t){if(i&1&&(r(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),n(4," Sign in to UniChat "),a(),r(5,"p",3),n(6," Your university AI chat assistant "),a()(),r(7,"form",4),x("ngSubmit",function(){return t.onSubmit()}),r(8,"div",5)(9,"div")(10,"label",6),n(11,"Email address"),a(),g(12,"input",7),s(13,P,3,1,"div",8),a(),r(14,"div")(15,"label",9),n(16,"Password"),a(),g(17,"input",10),s(18,M,3,1,"div",8),a()(),r(19,"div")(20,"button",11),s(21,B,4,0)(22,z,1,0),a()(),r(23,"div",12)(24,"p",13),n(25," Don't have an account? "),r(26,"a",14),n(27," Register here "),a()()()()()()),i&2){let m,c;l(7),f("formGroup",t.loginForm),l(6),d((m=t.loginForm.get("email"))!=null&&m.invalid&&((m=t.loginForm.get("email"))!=null&&m.touched)?13:-1),l(5),d((c=t.loginForm.get("password"))!=null&&c.invalid&&((c=t.loginForm.get("password"))!=null&&c.touched)?18:-1),l(2),f("disabled",t.loginForm.invalid||t.isLoading),l(),d(t.isLoading?21:22)}},dependencies:[C,R,E,b,F,L,N,T,q,y],encapsulation:2})};export{A as LoginComponent};
