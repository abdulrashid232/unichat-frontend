import{a as z,b as p}from"./chunk-G3UUUKVK.js";import"./chunk-BYXBJQAS.js";import{A as I,Aa as l,B as j,Ba as P,Ca as B,Da as G,Ea as U,G as c,I as _,J as b,N as E,Q as k,R as g,S as O,V as n,W as i,X as s,Z as y,ca as a,ga as A,i as M,l as w,la as T,s as v,ta as x,ua as N,v as m,w as f,wa as F,xa as H,za as D}from"./chunk-HSJBYG5P.js";var u=class e{constructor(o,t){this.authService=o;this.router=t}canActivate(o,t){if(this.authService.isLoggedIn)return!0;let r=t.url;return this.router.navigate(["/login"],{queryParams:{returnUrl:r}}),!1}static \u0275fac=function(t){return new(t||e)(m(p),m(l))};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})};var h=class e{constructor(o,t){this.authService=o;this.router=t}canActivate(o,t){return this.authService.isLoggedIn?(this.router.navigateByUrl("/chat"),!1):!0}static \u0275fac=function(t){return new(t||e)(m(p),m(l))};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})};var $=[{path:"",redirectTo:"chat",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-TTKBK6GJ.js").then(e=>e.LoginComponent),canActivate:[h]},{path:"register",loadComponent:()=>import("./chunk-Y6VHJRLS.js").then(e=>e.RegisterComponent),canActivate:[h]},{path:"chat",loadComponent:()=>import("./chunk-VYUYN4LP.js").then(e=>e.ChatComponent),canActivate:[u]},{path:"chat/:id",loadComponent:()=>import("./chunk-VYUYN4LP.js").then(e=>e.ChatComponent),canActivate:[u]},{path:"history",loadComponent:()=>import("./chunk-GZCLW6PE.js").then(e=>e.HistoryComponent),canActivate:[u]},{path:"not-found",loadComponent:()=>import("./chunk-AKT2JLOP.js").then(e=>e.NotFoundComponent)},{path:"**",redirectTo:"not-found"}];var q=(e,o)=>{let t=f(l),r=f(z),d=r.getToken(),Q=d?e.clone({headers:e.headers.set("Authorization",`Bearer ${d}`)}):e;return o(Q).pipe(w(L=>(L.status===401&&(r.removeToken(),t.navigate(["/login"])),M(()=>L))))};var J={providers:[T({eventCoalescing:!0}),G($),F(H([q]))]};var K=()=>({exact:!0}),C=class e{constructor(o){this.authService=o}mobileMenuOpen=!1;logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||e)(_(p))};static \u0275cmp=b({type:e,selectors:[["app-navbar"]],decls:33,vars:14,consts:[[1,"bg-white","shadow-sm","fixed","top-0","left-0","right-0"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","h-16"],[1,"flex"],[1,"flex-shrink-0","flex","items-center"],["routerLink","/chat",1,"text-xl","font-bold","text-primary"],[1,"hidden","sm:ml-6","sm:flex","sm:space-x-8"],["routerLink","/chat","routerLinkActive","border-primary text-gray-900",1,"border-transparent","text-gray-500","hover:border-gray-300","hover:text-gray-700","inline-flex","items-center","px-1","pt-1","border-b-2","text-sm","font-medium",3,"routerLinkActiveOptions"],["routerLink","/history","routerLinkActive","border-primary text-gray-900",1,"border-transparent","text-gray-500","hover:border-gray-300","hover:text-gray-700","inline-flex","items-center","px-1","pt-1","border-b-2","text-sm","font-medium"],[1,"hidden","sm:ml-6","sm:flex","sm:items-center"],[1,"ml-3","relative"],["type","button",1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","shadow-sm","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary",3,"click"],[1,"-mr-2","flex","items-center","sm:hidden"],["type","button",1,"inline-flex","items-center","justify-center","p-2","rounded-md","text-gray-400","hover:text-gray-500","hover:bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-inset","focus:ring-primary",3,"click"],[1,"sr-only"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"sm:hidden"],[1,"pt-2","pb-3","space-y-1"],["routerLink","/chat","routerLinkActive","bg-primary-light border-primary text-primary",1,"border-transparent","text-gray-600","hover:bg-gray-50","hover:border-gray-300","hover:text-gray-800","block","pl-3","pr-4","py-2","border-l-4","text-base","font-medium",3,"routerLinkActiveOptions"],["routerLink","/history","routerLinkActive","bg-primary-light border-primary text-primary",1,"border-transparent","text-gray-600","hover:bg-gray-50","hover:border-gray-300","hover:text-gray-800","block","pl-3","pr-4","py-2","border-l-4","text-base","font-medium"],["type","button",1,"w-full","text-left","border-transparent","text-gray-600","hover:bg-gray-50","hover:border-gray-300","hover:text-gray-800","block","pl-3","pr-4","py-2","border-l-4","text-base","font-medium",3,"click"]],template:function(t,r){t&1&&(n(0,"nav",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),a(6,"UniChat"),i()(),n(7,"div",6)(8,"a",7),a(9," Chat "),i(),n(10,"a",8),a(11," History "),i()()(),n(12,"div",9)(13,"div",10)(14,"div")(15,"button",11),y("click",function(){return r.logout()}),a(16," Sign out "),i()()()(),n(17,"div",12)(18,"button",13),y("click",function(){return r.mobileMenuOpen=!r.mobileMenuOpen}),n(19,"span",14),a(20,"Open main menu"),i(),I(),n(21,"svg",15),s(22,"path",16),i(),n(23,"svg",15),s(24,"path",17),i()()()()(),j(),n(25,"div",18)(26,"div",19)(27,"a",20),a(28," Chat "),i(),n(29,"a",21),a(30," History "),i(),n(31,"button",22),y("click",function(){return r.logout()}),a(32," Sign out "),i()()()()),t&2&&(c(8),k("routerLinkActiveOptions",A(12,K)),c(13),g("hidden",r.mobileMenuOpen)("block",!r.mobileMenuOpen),c(2),g("hidden",!r.mobileMenuOpen)("block",r.mobileMenuOpen),c(2),g("hidden",!r.mobileMenuOpen),c(2),k("routerLinkActiveOptions",A(13,K)))},dependencies:[x,U,P,B],encapsulation:2})};function X(e,o){e&1&&s(0,"app-navbar")}var S=class e{authService=f(p);title="unichat";static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["app-root"]],decls:2,vars:1,template:function(t,r){t&1&&(E(0,X,1,0,"app-navbar"),s(1,"router-outlet")),t&2&&O(r.authService.isLoggedIn?0:-1)},dependencies:[D,x,C],encapsulation:2})};N(S,J).catch(e=>console.error(e));
